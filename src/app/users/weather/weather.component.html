<main class="m-5 bg-base rounded-3">
    <nav class="navbar navbar-expand-lg p-2">
        <div class="container-fluid">
            <h4 class="text-light text-uppercase logo-text"><span><img width="50" src="../../../assets/img/logo.png"
                        alt=""></span> Weather<br>App</h4>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">

                </ul>
                <div>
                    <p class="m-0 text-light d-flex column-gap-2 align-items-center"><span><i class="bi bi-person-circle"></i></span> Welcome {{checktoken}}!</p>
                    <hr class="border-light border-top">
                    <form [formGroup]="cityForm" (ngSubmit)="citySubmit()">
                        <div *ngIf="errmsgshow" class="alert alert-danger" role="alert">
                            {{errmsg}}
                        </div>
                        <div class="d-flex column-gap-1 mb-2">
                            <select class="form-select" id="inputCity" formControlName="city"
                                aria-label="Default select example">
                                <option value="" disabled selected>Search another city</option>
                                <option value="lat=32.3777&lon=-86.3005">Alabama,Montgomery</option>
                                <option value="lat=58.3015&lon=-134.4202">Alaska,Juneau</option>
                                <option value="lat=33.4481&lon=-112.0969">Arizona,Phoenix</option>
                                <option value="lat=34.7466&lon=-92.2889">Arkansas,Little Rock</option>
                                <option value="lat=38.5766&lon=-121.4936">California,Sacramento</option>
                                <option value="lat=38.5766&lon=-121.4936">Colorado,Denver</option>
                                <option value="lat=41.7640&lon=-72.6821">Connecticut,Hartford</option>
                                <option value="lat=39.1573&lon=-75.5197">Delaware,Dover</option>
                                <option value="lat=21.3074&lon=-157.8573">Hawaii,Honolulu</option>
                                <option value="lat=30.4381&lon=-84.2812">Florida,Tallahassee</option>
                                <option value="lat=33.7490&lon=-84.3882">Georgia,Atlanta</option>
                                <option value="lat=43.6177&lon=-116.1997">Idaho,Boise</option>
                                <option value="lat=39.7983&lon=-89.6549">Illinois,Springfield</option>
                                <option value="lat=39.7686&lon=-86.1626">Indiana,Indianapolis</option>
                                <option value="lat=41.5910&lon=-93.6037">Iowa,Des Moines</option>
                                <option value="lat=39.0481&lon=-95.6779">Kansas,Topeka</option>
                                <option value="lat=38.1867&lon=-84.8753">Kentucky,Frankfort</option>
                                <option value="lat=30.4570&lon=-91.1873">Louisiana,Baton Rouge</option>
                                <option value="lat=44.3071&lon=-69.7816">Maine,Augusta</option>
                                <option value="lat=38.9787&lon=-76.4909">Maryland,Annapolis</option>
                                <option value="lat=42.3581&lon=-71.0636">Massachusetts,Boston</option>
                                <option value="lat=42.7336&lon=-84.5553">Michigan,Lansing</option>
                                <option value="lat=44.9550&lon=-93.1022">Minnesota,St. Paul</option>
                                <option value="lat=32.3038&lon=-90.1821">Mississippi,Jackson</option>
                                <option value="lat=38.5792&lon=-92.1729">Missouri,Jefferson City</option>
                                <option value="lat=46.5857&lon=-112.0184">Montana,Helena</option>
                                <option value="lat=40.8080&lon=-96.6996">Nebraska,Lincoln</option>
                                <option value="lat=39.1639&lon=-119.7661">Nevada,Carson City</option>
                                <option value="lat=43.2068&lon=-71.5379">New Hampshire,Concord</option>
                                <option value="lat=40.2205&lon=-74.7699">New Jersey,Trenton</option>
                                <option value="lat=35.6822&lon=-105.9397">New Mexico,Santa Fe</option>
                                <option value="lat=35.7804&lon=-78.6390">North Carolina,Raleigh</option>
                                <option value="lat=46.8208&lon=-100.7833">North Dakota,Bismarck</option>
                                <option value="lat=42.6528&lon=-73.7578">New York,Albany</option>
                                <option value="lat=39.9613&lon=-82.9990">Ohio,Columbus</option>
                                <option value="lat=35.4922&lon=-97.5033">Oklahoma,Oklahoma City</option>
                                <option value="lat=44.9384&lon=-123.0304">Oregon,Salem</option>
                                <option value="lat=40.2643&lon=-76.8835">Pennsylvania,Harrisburg</option>
                                <option value="lat=41.8309&lon=-71.4149">Rhode Island,Providence</option>
                                <option value="lat=34.0003&lon=-81.0332">South Carolina,Columbia</option>
                                <option value="lat=44.3670&lon=-100.3464">South Dakota,Pierre</option>
                                <option value="lat=36.1658&lon=-86.7842">Tennessee,Nashville</option>
                                <option value="lat=30.2746&lon=-97.7403">Texas,Austin</option>
                                <option value="lat=40.7774&lon=-111.8882">Utah,Salt Lake City</option>
                                <option value="lat=44.2624&lon=-72.5805">Vermont,Montpelier</option>
                                <option value="lat=37.5388&lon=-77.4336">Virginia,Richmond</option>
                                <option value="lat=47.0358&lon=-122.9050">Washington,Olympia</option>
                                <option value="lat=38.3362&lon=-81.6123">West Virginia,Charleston</option>
                                <option value="lat=43.0746&lon=-89.3844">Wisconsin,Madison</option>
                                <option value="lat=41.1402&lon=-104.8202">Wyoming,Cheyenne</option>
                            </select>
                            <button type="submit" class="btn btn-success text-uppercase"><i class="bi bi-search"></i></button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </nav>

    <div *ngIf="apidata" class="col-lg-12 bg-base">
        <div class="d-flex justify-content-center">
            <div class="col-lg-6 p-3">
                <h3 class="fw-bold text-light">Current weather</h3>
            </div>
            <div class="col-lg-6 p-3 d-flex justify-content-end align-items-center">
                <p class="fw-bold text-light m-0">
                    <span><i class="bi bi-geo-alt-fill"></i></span>
                    {{ apidata.city.name }}
                </p>
            </div>
        </div>
    </div>

    <div class="px-5 pt-5 mb-4">
        <div *ngIf="apidatacurrent" class="container-fluid">
            <div class="row align-items-center text-center">
                <div class="col-lg-4 col-lg-4 justify-content-center d-flex align-items-center">
                    <img class="anim-cloud"
                        src='http://openweathermap.org/img/wn/{{ apidatacurrent.current.weather[0].icon }}@4x.png'
                        alt="">
                </div>
                <div class="col-lg-4 col-lg-4 justify-content-center d-flex flex-column">
                    <h1 class="big-text text-light">{{ apidatacurrent.current.temp }}°</h1>
                    <div class="d-flex column-gap-3 justify-content-center">
                        <p class="text-light">Feels like: <span>{{apidatacurrent.current.feels_like}}°</span></p>
                        <p class="text-light"><span><i class="bi bi-wind"></i></span> {{
                            apidatacurrent.current.wind_speed }}m/s</p>
                        <p class="text-light"><span><i class="bi bi-droplet"></i></span> {{
                            apidatacurrent.current.humidity }}%</p>
                    </div>
                </div>
                <div class="col-lg-4 col-lg-4 justify-content-center d-flex">
                    <div>
                        <p class="text-light" *ngIf="apipollution">
                            <span class="quality-{{ apipollution.list[0].main.aqi }} quality-good d-none">
                                <img width="200" src="../../../assets/img/good.png" alt=""><br>
                            </span>
                            <span class="quality-{{ apipollution.list[0].main.aqi }} quality-fair d-none">
                                <img width="200" src="../../../assets/img/fine.png" alt=""><br>
                            </span>
                            <span class="quality-{{ apipollution.list[0].main.aqi }} quality-moderate d-none">
                                <img width="200" src="../../../assets/img/moderate.png" alt=""><br>
                            </span>
                            <span class="quality-{{ apipollution.list[0].main.aqi }} quality-poor d-none">
                                <img width="200" src="../../../assets/img/poor.png" alt=""><br>
                            </span>
                            <span class="quality-{{ apipollution.list[0].main.aqi }} quality-very d-none">
                                <img width="200" src="../../../assets/img/very.png" alt=""><br>
                            </span>
                            <br>
                            Air quality
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <div *ngIf="apidatacurrent" class="px-5 pt-5 pb-5 mb-4 border-top">
        <div class="row row-cols-1 row-cols-lg-4 g-2 g-lg-3">
            <div class="col" *ngFor="let periods of [].constructor(4); let i = index">
                <div class="p-4 bg-base rounded-3">
                    <p id='index-{{i}}' class="text-light text-uppercase">{{ (apidatacurrent.daily[i].dt * 1000) |
                        date:"EEE, d" }}</p>
                    <div class="d-flex align-items-center gap-3">
                        <img src='http://openweathermap.org/img/wn/{{ apidatacurrent.daily[i].weather[0].icon }}.png'
                            alt="">
                        <h1 class="text-light">{{ apidatacurrent.daily[i].temp.day }}°</h1>
                    </div>
                    <p class="text-light fs-5 m-0 text-capitalize">{{ apidatacurrent.daily[i].weather[0].description }}
                    </p>
                </div>
            </div>
        </div>
    </div>


</main>